var dt,x,ne,oe,j,Ot,ie,yt,re,St,kt,xt,se,tt={},ae=[],He=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Lt=Array.isArray;function W(e,t){for(var n in t)e[n]=t[n];return e}function Et(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function r(e,t,n){var o,s,i,a={};for(i in t)i=="key"?o=t[i]:i=="ref"?s=t[i]:a[i]=t[i];if(arguments.length>2&&(a.children=arguments.length>3?dt.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)a[i]===void 0&&(a[i]=e.defaultProps[i]);return st(e,a,o,s,null)}function st(e,t,n,o,s){var i={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++ne,__i:-1,__u:0};return s==null&&x.vnode!=null&&x.vnode(i),i}function G(e){return e.children}function Y(e,t){this.props=e,this.context=t}function V(e,t){if(t==null)return e.__?V(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?V(e):null}function ue(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return ue(e)}}function Nt(e){(!e.__d&&(e.__d=!0)&&j.push(e)&&!ut.__r++||Ot!==x.debounceRendering)&&((Ot=x.debounceRendering)||ie)(ut)}function ut(){var e,t,n,o,s,i,a,l;for(j.sort(yt);e=j.shift();)e.__d&&(t=j.length,o=void 0,i=(s=(n=e).__v).__e,a=[],l=[],n.__P&&((o=W({},s)).__v=s.__v+1,x.vnode&&x.vnode(o),Tt(n.__P,o,s,n.__n,n.__P.namespaceURI,32&s.__u?[i]:null,a,i??V(s),!!(32&s.__u),l),o.__v=s.__v,o.__.__k[o.__i]=o,_e(a,o,l),o.__e!=i&&ue(o)),j.length>t&&j.sort(yt));ut.__r=0}function le(e,t,n,o,s,i,a,l,c,_,f){var u,p,d,k,m,h,v=o&&o.__k||ae,y=t.length;for(c=We(n,t,v,c,y),u=0;u<y;u++)(d=n.__k[u])!=null&&(p=d.__i===-1?tt:v[d.__i]||tt,d.__i=u,h=Tt(e,d,p,s,i,a,l,c,_,f),k=d.__e,d.ref&&p.ref!=d.ref&&(p.ref&&At(p.ref,null,d),f.push(d.ref,d.__c||k,d)),m==null&&k!=null&&(m=k),4&d.__u||p.__k===d.__k?c=ce(d,c,e):typeof d.type=="function"&&h!==void 0?c=h:k&&(c=k.nextSibling),d.__u&=-7);return n.__e=m,c}function We(e,t,n,o,s){var i,a,l,c,_,f=n.length,u=f,p=0;for(e.__k=new Array(s),i=0;i<s;i++)(a=t[i])!=null&&typeof a!="boolean"&&typeof a!="function"?(c=i+p,(a=e.__k[i]=typeof a=="string"||typeof a=="number"||typeof a=="bigint"||a.constructor==String?st(null,a,null,null,null):Lt(a)?st(G,{children:a},null,null,null):a.constructor===void 0&&a.__b>0?st(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,l=null,(_=a.__i=Fe(a,n,c,u))!==-1&&(u--,(l=n[_])&&(l.__u|=2)),l==null||l.__v===null?(_==-1&&p--,typeof a.type!="function"&&(a.__u|=4)):_!=c&&(_==c-1?p--:_==c+1?p++:(_>c?p--:p++,a.__u|=4))):e.__k[i]=null;if(u)for(i=0;i<f;i++)(l=n[i])!=null&&(2&l.__u)==0&&(l.__e==o&&(o=V(l)),de(l,l));return o}function ce(e,t,n){var o,s;if(typeof e.type=="function"){for(o=e.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=e,t=ce(o[s],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=V(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Fe(e,t,n,o){var s,i,a=e.key,l=e.type,c=t[n];if(c===null||c&&a==c.key&&l===c.type&&(2&c.__u)==0)return n;if(o>(c!=null&&(2&c.__u)==0?1:0))for(s=n-1,i=n+1;s>=0||i<t.length;){if(s>=0){if((c=t[s])&&(2&c.__u)==0&&a==c.key&&l===c.type)return s;s--}if(i<t.length){if((c=t[i])&&(2&c.__u)==0&&a==c.key&&l===c.type)return i;i++}}return-1}function Vt(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||He.test(t)?n:n+"px"}function rt(e,t,n,o,s){var i;t:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Vt(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||Vt(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(re,"$1")),t=t.toLowerCase()in e||t=="onFocusOut"||t=="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o?n.u=o.u:(n.u=St,e.addEventListener(t,i?xt:kt,i)):e.removeEventListener(t,i?xt:kt,i);else{if(s=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function qt(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=St++;else if(t.t<n.u)return;return n(x.event?x.event(t):t)}}}function Tt(e,t,n,o,s,i,a,l,c,_){var f,u,p,d,k,m,h,v,y,I,A,R,B,it,O,J,Q,P=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[l=t.__e=n.__e]),(f=x.__b)&&f(t);t:if(typeof P=="function")try{if(v=t.props,y="prototype"in P&&P.prototype.render,I=(f=P.contextType)&&o[f.__c],A=f?I?I.props.value:f.__:o,n.__c?h=(u=t.__c=n.__c).__=u.__E:(y?t.__c=u=new P(v,A):(t.__c=u=new Y(v,A),u.constructor=P,u.render=je),I&&I.sub(u),u.props=v,u.state||(u.state={}),u.context=A,u.__n=o,p=u.__d=!0,u.__h=[],u._sb=[]),y&&u.__s==null&&(u.__s=u.state),y&&P.getDerivedStateFromProps!=null&&(u.__s==u.state&&(u.__s=W({},u.__s)),W(u.__s,P.getDerivedStateFromProps(v,u.__s))),d=u.props,k=u.state,u.__v=t,p)y&&P.getDerivedStateFromProps==null&&u.componentWillMount!=null&&u.componentWillMount(),y&&u.componentDidMount!=null&&u.__h.push(u.componentDidMount);else{if(y&&P.getDerivedStateFromProps==null&&v!==d&&u.componentWillReceiveProps!=null&&u.componentWillReceiveProps(v,A),!u.__e&&(u.shouldComponentUpdate!=null&&u.shouldComponentUpdate(v,u.__s,A)===!1||t.__v==n.__v)){for(t.__v!=n.__v&&(u.props=v,u.state=u.__s,u.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function($){$&&($.__=t)}),R=0;R<u._sb.length;R++)u.__h.push(u._sb[R]);u._sb=[],u.__h.length&&a.push(u);break t}u.componentWillUpdate!=null&&u.componentWillUpdate(v,u.__s,A),y&&u.componentDidUpdate!=null&&u.__h.push(function(){u.componentDidUpdate(d,k,m)})}if(u.context=A,u.props=v,u.__P=e,u.__e=!1,B=x.__r,it=0,y){for(u.state=u.__s,u.__d=!1,B&&B(t),f=u.render(u.props,u.state,u.context),O=0;O<u._sb.length;O++)u.__h.push(u._sb[O]);u._sb=[]}else do u.__d=!1,B&&B(t),f=u.render(u.props,u.state,u.context),u.state=u.__s;while(u.__d&&++it<25);u.state=u.__s,u.getChildContext!=null&&(o=W(W({},o),u.getChildContext())),y&&!p&&u.getSnapshotBeforeUpdate!=null&&(m=u.getSnapshotBeforeUpdate(d,k)),l=le(e,Lt(J=f!=null&&f.type===G&&f.key==null?f.props.children:f)?J:[J],t,n,o,s,i,a,l,c,_),u.base=t.__e,t.__u&=-161,u.__h.length&&a.push(u),h&&(u.__E=u.__=null)}catch($){if(t.__v=null,c||i!=null)if($.then){for(t.__u|=c?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;i[i.indexOf(l)]=null,t.__e=l}else for(Q=i.length;Q--;)Et(i[Q]);else t.__e=n.__e,t.__k=n.__k;x.__e($,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=Be(n.__e,t,n,o,s,i,a,c,_);return(f=x.diffed)&&f(t),128&t.__u?void 0:l}function _e(e,t,n){for(var o=0;o<n.length;o++)At(n[o],n[++o],n[++o]);x.__c&&x.__c(t,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(i){i.call(s)})}catch(i){x.__e(i,s.__v)}})}function Be(e,t,n,o,s,i,a,l,c){var _,f,u,p,d,k,m,h=n.props,v=t.props,y=t.type;if(y=="svg"?s="http://www.w3.org/2000/svg":y=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),i!=null){for(_=0;_<i.length;_++)if((d=i[_])&&"setAttribute"in d==!!y&&(y?d.localName==y:d.nodeType==3)){e=d,i[_]=null;break}}if(e==null){if(y==null)return document.createTextNode(v);e=document.createElementNS(s,y,v.is&&v),l&&(x.__m&&x.__m(t,i),l=!1),i=null}if(y===null)h===v||l&&e.data===v||(e.data=v);else{if(i=i&&dt.call(e.childNodes),h=n.props||tt,!l&&i!=null)for(h={},_=0;_<e.attributes.length;_++)h[(d=e.attributes[_]).name]=d.value;for(_ in h)if(d=h[_],_!="children"){if(_=="dangerouslySetInnerHTML")u=d;else if(!(_ in v)){if(_=="value"&&"defaultValue"in v||_=="checked"&&"defaultChecked"in v)continue;rt(e,_,null,d,s)}}for(_ in v)d=v[_],_=="children"?p=d:_=="dangerouslySetInnerHTML"?f=d:_=="value"?k=d:_=="checked"?m=d:l&&typeof d!="function"||h[_]===d||rt(e,_,d,h[_],s);if(f)l||u&&(f.__html===u.__html||f.__html===e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(u&&(e.innerHTML=""),le(e,Lt(p)?p:[p],t,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":s,i,a,i?i[0]:n.__k&&V(n,0),l,c),i!=null)for(_=i.length;_--;)Et(i[_]);l||(_="value",y=="progress"&&k==null?e.removeAttribute("value"):k!==void 0&&(k!==e[_]||y=="progress"&&!k||y=="option"&&k!==h[_])&&rt(e,_,k,h[_],s),_="checked",m!==void 0&&m!==e[_]&&rt(e,_,m,h[_],s))}return e}function At(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(s){x.__e(s,n)}}function de(e,t,n){var o,s;if(x.unmount&&x.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||At(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(i){x.__e(i,t)}o.base=o.__P=null}if(o=e.__k)for(s=0;s<o.length;s++)o[s]&&de(o[s],t,n||typeof e.type!="function");n||Et(e.__e),e.__c=e.__=e.__e=void 0}function je(e,t,n){return this.constructor(e,n)}function fe(e,t,n){var o,s,i,a;t==document&&(t=document.documentElement),x.__&&x.__(e,t),s=(o=typeof n=="function")?null:n&&n.__k||t.__k,i=[],a=[],Tt(t,e=(!o&&n||t).__k=r(G,null,[e]),s||tt,tt,t.namespaceURI,!o&&n?[n]:s?null:t.firstChild?dt.call(t.childNodes):null,i,!o&&n?n:s?s.__e:t.firstChild,o,a),_e(i,e,a)}function pe(e,t){var n={__c:t="__cC"+se++,__:e,Consumer:function(o,s){return o.children(s)},Provider:function(o){var s,i;return this.getChildContext||(s=new Set,(i={})[t]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){s=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&s.forEach(function(l){l.__e=!0,Nt(l)})},this.sub=function(a){s.add(a);var l=a.componentWillUnmount;a.componentWillUnmount=function(){s&&s.delete(a),l&&l.call(a)}}),o.children}};return n.Provider.__=n.Consumer.contextType=n}dt=ae.slice,x={__e:function(e,t,n,o){for(var s,i,a;t=t.__;)if((s=t.__c)&&!s.__)try{if((i=s.constructor)&&i.getDerivedStateFromError!=null&&(s.setState(i.getDerivedStateFromError(e)),a=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,o||{}),a=s.__d),a)return s.__E=s}catch(l){e=l}throw e}},ne=0,oe=function(e){return e!=null&&e.constructor==null},Y.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=W({},this.state),typeof e=="function"&&(e=e(W({},n),this.props)),e&&W(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Nt(this))},Y.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Nt(this))},Y.prototype.render=G,j=[],ie=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yt=function(e,t){return e.__v.__b-t.__v.__b},ut.__r=0,re=/(PointerCapture)$|Capture$/i,St=0,kt=qt(!1),xt=qt(!0),se=0;var q,C,gt,Gt,lt=0,ve=[],L=x,Kt=L.__b,zt=L.__r,Zt=L.diffed,Jt=L.__c,Qt=L.unmount,Yt=L.__;function ft(e,t){L.__h&&L.__h(C,e,lt||t),lt=0;var n=C.__H||(C.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function S(e){return lt=1,Re(ge,e)}function Re(e,t,n){var o=ft(q++,2);if(o.t=e,!o.__c&&(o.__=[n?n(t):ge(void 0,t),function(l){var c=o.__N?o.__N[0]:o.__[0],_=o.t(c,l);c!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=C,!C.u)){var s=function(l,c,_){if(!o.__c.__H)return!0;var f=o.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!i||i.call(this,l,c,_);var u=o.__c.props!==l;return f.forEach(function(p){if(p.__N){var d=p.__[0];p.__=p.__N,p.__N=void 0,d!==p.__[0]&&(u=!0)}}),i&&i.call(this,l,c,_)||u};C.u=!0;var i=C.shouldComponentUpdate,a=C.componentWillUpdate;C.componentWillUpdate=function(l,c,_){if(this.__e){var f=i;i=void 0,s(l,c,_),i=f}a&&a.call(this,l,c,_)},C.shouldComponentUpdate=s}return o.__N||o.__}function D(e,t){var n=ft(q++,3);!L.__s&&me(n.__H,t)&&(n.__=e,n.i=t,C.__H.__h.push(n))}function Pt(e){return lt=5,Mt(function(){return{current:e}},[])}function Mt(e,t){var n=ft(q++,7);return me(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function he(e){var t=C.context[e.__c],n=ft(q++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(C)),t.props.value):e.__}function Oe(){for(var e;e=ve.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(at),e.__H.__h.forEach(bt),e.__H.__h=[]}catch(t){e.__H.__h=[],L.__e(t,e.__v)}}L.__b=function(e){C=null,Kt&&Kt(e)},L.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Yt&&Yt(e,t)},L.__r=function(e){zt&&zt(e),q=0;var t=(C=e.__c).__H;t&&(gt===C?(t.__h=[],C.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(at),t.__h.forEach(bt),t.__h=[],q=0)),gt=C},L.diffed=function(e){Zt&&Zt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(ve.push(t)!==1&&Gt===L.requestAnimationFrame||((Gt=L.requestAnimationFrame)||Ve)(Oe)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),gt=C=null},L.__c=function(e,t){t.some(function(n){try{n.__h.forEach(at),n.__h=n.__h.filter(function(o){return!o.__||bt(o)})}catch(o){t.some(function(s){s.__h&&(s.__h=[])}),t=[],L.__e(o,n.__v)}}),Jt&&Jt(e,t)},L.unmount=function(e){Qt&&Qt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{at(o)}catch(s){t=s}}),n.__H=void 0,t&&L.__e(t,n.__v))};var Xt=typeof requestAnimationFrame=="function";function Ve(e){var t,n=function(){clearTimeout(o),Xt&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,100);Xt&&(t=requestAnimationFrame(n))}function at(e){var t=C,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),C=t}function bt(e){var t=C;e.__c=e.__(),C=t}function me(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function ge(e,t){return typeof t=="function"?t(e):t}var qe=Symbol.for("preact-signals");function pt(){if(F>1)F--;else{for(var e,t=!1;X!==void 0;){var n=X;for(X=void 0,Ct++;n!==void 0;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&ke(n))try{n.c()}catch(s){t||(e=s,t=!0)}n=o}}if(Ct=0,F--,t)throw e}}function Ge(e){if(F>0)return e();F++;try{return e()}finally{pt()}}var N=void 0,X=void 0,F=0,Ct=0,ct=0;function we(e){if(N!==void 0){var t=e.n;if(t===void 0||t.t!==N)return t={i:0,S:e,p:N.s,n:void 0,t:N,e:void 0,x:void 0,r:t},N.s!==void 0&&(N.s.n=t),N.s=t,e.n=t,32&N.f&&e.S(t),t;if(t.i===-1)return t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=N.s,t.n=void 0,N.s.n=t,N.s=t),t}}function E(e){this.v=e,this.i=0,this.n=void 0,this.t=void 0}E.prototype.brand=qe;E.prototype.h=function(){return!0};E.prototype.S=function(e){this.t!==e&&e.e===void 0&&(e.x=this.t,this.t!==void 0&&(this.t.e=e),this.t=e)};E.prototype.U=function(e){if(this.t!==void 0){var t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n)}};E.prototype.subscribe=function(e){var t=this;return nt(function(){var n=t.value,o=N;N=void 0;try{e(n)}finally{N=o}})};E.prototype.valueOf=function(){return this.value};E.prototype.toString=function(){return this.value+""};E.prototype.toJSON=function(){return this.value};E.prototype.peek=function(){var e=N;N=void 0;try{return this.value}finally{N=e}};Object.defineProperty(E.prototype,"value",{get:function(){var e=we(this);return e!==void 0&&(e.i=this.i),this.v},set:function(e){if(e!==this.v){if(Ct>100)throw new Error("Cycle detected");this.v=e,this.i++,ct++,F++;try{for(var t=this.t;t!==void 0;t=t.x)t.t.N()}finally{pt()}}}});function ye(e){return new E(e)}function ke(e){for(var t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function xe(e){for(var t=e.s;t!==void 0;t=t.n){var n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function Ne(e){for(var t=e.s,n=void 0;t!==void 0;){var o=t.p;t.i===-1?(t.S.U(t),o!==void 0&&(o.n=t.n),t.n!==void 0&&(t.n.p=o)):n=t,t.S.n=t.r,t.r!==void 0&&(t.r=void 0),t=o}e.s=n}function K(e){E.call(this,void 0),this.x=e,this.s=void 0,this.g=ct-1,this.f=4}(K.prototype=new E).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===ct))return!0;if(this.g=ct,this.f|=1,this.i>0&&!ke(this))return this.f&=-2,!0;var e=N;try{xe(this),N=this;var t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return N=e,Ne(this),this.f&=-2,!0};K.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(var t=this.s;t!==void 0;t=t.n)t.S.S(t)}E.prototype.S.call(this,e)};K.prototype.U=function(e){if(this.t!==void 0&&(E.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(var t=this.s;t!==void 0;t=t.n)t.S.U(t)}};K.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var e=this.t;e!==void 0;e=e.x)e.t.N()}};Object.defineProperty(K.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var e=we(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}});function te(e){return new K(e)}function be(e){var t=e.u;if(e.u=void 0,typeof t=="function"){F++;var n=N;N=void 0;try{t()}catch(o){throw e.f&=-2,e.f|=8,It(e),o}finally{N=n,pt()}}}function It(e){for(var t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,be(e)}function Ke(e){if(N!==this)throw new Error("Out-of-order effect");Ne(this),N=e,this.f&=-2,8&this.f&&It(this),pt()}function et(e){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}et.prototype.c=function(){var e=this.S();try{if(8&this.f||this.x===void 0)return;var t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}};et.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,be(this),xe(this),F++;var e=N;return N=this,Ke.bind(this,e)};et.prototype.N=function(){2&this.f||(this.f|=2,this.o=X,X=this)};et.prototype.d=function(){this.f|=8,1&this.f||It(this)};function nt(e){var t=new et(e);try{t.c()}catch(n){throw t.d(),n}return t.d.bind(t)}var Ce,Dt,wt;var Se=[];nt(function(){Ce=this.N})();function z(e,t){x[e]=t.bind(null,x[e]||function(){})}function _t(e){wt&&wt(),wt=e&&e.S()}function Le(e){var t=this,n=e.data,o=Ze(n);o.value=n;var s=Mt(function(){for(var l=t,c=t.__v;c=c.__;)if(c.__c){c.__c.__$f|=4;break}var _=te(function(){var d=o.value.value;return d===0?0:d===!0?"":d||""}),f=te(function(){return!oe(_.value)}),u=nt(function(){if(this.N=Ee,f.value){var d=_.value;l.base&&l.base.nodeType===3&&(l.base.data=d)}}),p=t.__$u.d;return t.__$u.d=function(){u(),p.call(this)},[f,_]},[]),i=s[0],a=s[1];return i.value?a.peek():a.value}Le.displayName="_st";Object.defineProperties(E.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Le},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});z("__b",function(e,t){if(typeof t.type=="string"){var n,o=t.props;for(var s in o)if(s!=="children"){var i=o[s];i instanceof E&&(n||(t.__np=n={}),n[s]=i,o[s]=i.peek())}}e(t)});z("__r",function(e,t){_t();var n,o=t.__c;o&&(o.__$f&=-2,(n=o.__$u)===void 0&&(o.__$u=n=function(s){var i;return nt(function(){i=this}),i.c=function(){o.__$f|=1,o.setState({})},i}())),Dt=o,_t(n),e(t)});z("__e",function(e,t,n,o){_t(),Dt=void 0,e(t,n,o)});z("diffed",function(e,t){_t(),Dt=void 0;var n;if(typeof t.type=="string"&&(n=t.__e)){var o=t.__np,s=t.props;if(o){var i=n.U;if(i)for(var a in i){var l=i[a];l!==void 0&&!(a in o)&&(l.d(),i[a]=void 0)}else i={},n.U=i;for(var c in o){var _=i[c],f=o[c];_===void 0?(_=ze(n,c,f,s),i[c]=_):_.o(f,s)}}}e(t)});function ze(e,t,n,o){var s=t in e&&e.ownerSVGElement===void 0,i=ye(n);return{o:function(a,l){i.value=a,o=l},d:nt(function(){this.N=Ee;var a=i.value.value;o[t]!==a&&(o[t]=a,s?e[t]=a:a?e.setAttribute(t,a):e.removeAttribute(t))})}}z("unmount",function(e,t){if(typeof t.type=="string"){var n=t.__e;if(n){var o=n.U;if(o){n.U=void 0;for(var s in o){var i=o[s];i&&i.d()}}}}else{var a=t.__c;if(a){var l=a.__$u;l&&(a.__$u=void 0,l.d())}}e(t)});z("__h",function(e,t,n,o){(o<3||o===9)&&(t.__$f|=2),e(t,n,o)});Y.prototype.shouldComponentUpdate=function(e,t){var n=this.__$u,o=n&&n.s!==void 0;for(var s in t)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var i=2&this.__$f;if(!(o||i||4&this.__$f)||1&this.__$f)return!0}else if(!(o||4&this.__$f)||3&this.__$f)return!0;for(var a in e)if(a!=="__source"&&e[a]!==this.props[a])return!0;for(var l in this.props)if(!(l in e))return!0;return!1};function Ze(e){return Mt(function(){return ye(e)},[])}var Je=function(e){queueMicrotask(function(){queueMicrotask(e)})};function Qe(){Ge(function(){for(var e;e=Se.shift();)Ce.call(e)})}function Ee(){Se.push(this)===1&&(x.requestAnimationFrame||Je)(Qe)}var Te=function(e,t,n,o){var s;t[0]=0;for(var i=1;i<t.length;i++){var a=t[i++],l=t[i]?(t[0]|=a?1:2,n[t[i++]]):t[++i];a===3?o[0]=l:a===4?o[1]=Object.assign(o[1]||{},l):a===5?(o[1]=o[1]||{})[t[++i]]=l:a===6?o[1][t[++i]]+=l+"":a?(s=e.apply(l,Te(e,l,n,["",null])),o.push(s),l[0]?t[0]|=2:(t[i-2]=0,t[i]=s)):o.push(l)}return o},ee=new Map;function Ye(e){var t=ee.get(this);return t||(t=new Map,ee.set(this,t)),(t=Te(this,t.get(e)||(t.set(e,t=function(n){for(var o,s,i=1,a="",l="",c=[0],_=function(p){i===1&&(p||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,p,a):i===3&&(p||a)?(c.push(3,p,a),i=2):i===2&&a==="..."&&p?c.push(4,p,0):i===2&&a&&!p?c.push(5,0,!0,a):i>=5&&((a||!p&&i===5)&&(c.push(i,0,a,s),i=6),p&&(c.push(i,p,0,s),i=6)),a=""},f=0;f<n.length;f++){f&&(i===1&&_(),_(f));for(var u=0;u<n[f].length;u++)o=n[f][u],i===1?o==="<"?(_(),c=[c],i=3):a+=o:i===4?a==="--"&&o===">"?(i=1,a=""):a=o+a[0]:l?o===l?l="":a+=o:o==='"'||o==="'"?l=o:o===">"?(_(),i=1):i&&(o==="="?(i=5,s=a,a=""):o==="/"&&(i<5||n[f][u+1]===">")?(_(),i===3&&(c=c[0]),i=c,(c=c[0]).push(2,0,i),i=0):o===" "||o==="	"||o===`
`||o==="\r"?(_(),i=2):a+=o),i===3&&a==="!--"&&(i=4,c=c[0])}return _(),c}(e)),t),arguments,[])).length>1?t:t[0]}var Un=Ye.bind(r);var Xe={focusModes:[],tags:[],notes:[]},Ae=pe(null);function Pe({children:e}){let[t,n]=S(Xe),o=s=>{n(i=>({...i,...s}))};return r(Ae.Provider,{value:{appContext:t,updateAppContext:o}},e)}var Z=()=>{let e=he(Ae);if(!e)throw new Error("useAppContext must be used within an AppProvider");return e};async function U(e,t,n){let o={method:e,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};return await(await fetch(t,o)).json()}async function tn(){return await U("GET","/api/focus")}async function en(){return await U("POST","/api/focus/new")}async function nn(){return await U("GET","/api/notes")}async function on(e){return await U("GET",`/api/notes/${e}`)}async function rn(e){return await U("GET",`/api/notes?tag_id=${e}`)}async function sn(e){return await U("POST","/api/notes/",e)}async function an(e,t){return await U("PUT",`/api/notes/${e}`,t)}async function un(){return await U("GET","/api/tags")}async function ln(e){return await U("GET",`/api/tags?query=${e}`)}async function cn(e){return await U("POST","/api/images/",e)}var M={request:U,getAllFocusModes:tn,createFocusMode:en,getAllNotes:nn,getNoteById:on,getNotesByTagId:rn,createNote:sn,updateNote:an,getAllTags:un,searchTags:ln,uploadImage:cn};function Ut({children:e}){let[t,n]=S(window.location.pathname);D(()=>{function o(){n(window.location.pathname)}return window.addEventListener("navigate",o),window.addEventListener("popstate",o),()=>{window.removeEventListener("navigate",o),window.removeEventListener("popstate",o)}},[]);for(let o=0;o<e.length;o++){let s=e[o],{path:i,component:a}=s.props;if(i.includes(":")){let c=i.split("/").map(u=>u.startsWith(":")?`(?<${u.slice(1)}>[^/]+)`:u).join("\\/"),f=new RegExp(`^${c}$`).exec(t);if(f){let u=f.groups;return r(a,{...u})}}if(t===i)return r(a,{})}return null}function vt(){return null}function T({to:e,children:t,className:n}){return r("a",{href:e,onClick:s=>{s.preventDefault(),window.history.pushState({},"",e),window.dispatchEvent(new PopStateEvent("navigate"))},className:n},t)}function _n({tags:e=[]}){return r("div",null,r("div",{className:"sidebar-section-title"},"Tags"),e.map(t=>r(T,{key:t.tag_id,to:`/?tag_id=${t.tag_id}`},t.name)))}var Me=_n;function dn(){let{appContext:e}=Z(),{focusModes:t,tags:n}=e;return r("div",null,r("div",{className:"sidebar-focus-switcher"},r("div",{className:"dropdown-button button"},"All Notes",r(fn,null)),r("div",{className:"dropdown-container"},r("ul",{className:"dropdown-menu"},t?.map(o=>r("li",{className:"dropdown-option"},o.Name)),r("li",{className:"dropdown-option"},"Add new...")))),r(T,{className:"sidebar-button",to:"/new"},r(pn,null),"New"),r(T,{className:"sidebar-button",to:"/"},r(vn,null),"Notes"),r(T,{className:"sidebar-button",to:"/"},r(hn,null),"Boards"),r(T,{className:"sidebar-button",to:"/"},r(mn,null),"Search"),r(T,{className:"sidebar-button",to:"/"},r(gn,null),"Settings"),r("div",{className:"sidebar-section"},r(Me,{tags:n})))}function fn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-chevron-down"},r("path",{d:"m6 9 6 6 6-6"}))}function pn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-circle-plus"},r("circle",{cx:"12",cy:"12",r:"10"}),r("path",{d:"M8 12h8"}),r("path",{d:"M12 8v8"}))}function vn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-files"},r("path",{d:"M20 7h-3a2 2 0 0 1-2-2V2"}),r("path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"}),r("path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"}))}function hn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-layout-dashboard"},r("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),r("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),r("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),r("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"}))}function mn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-search"},r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"}))}function gn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-settings"},r("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),r("circle",{cx:"12",cy:"12",r:"3"}))}var Ie=dn;function $t({onListViewClick:e,onGridViewClick:t}){return r("div",{className:"notes-list-toolbar"},r("div",{onClick:()=>e()},r(wn,null)),r("div",{onClick:()=>t()},r(yn,null)))}function wn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-rows-3"},r("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),r("path",{d:"M21 9H3"}),r("path",{d:"M21 15H3"}))}function yn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-layout-grid"},r("rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}),r("rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}),r("rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}),r("rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}))}function ot(e){let t=window.markdownit({linkify:!0,breaks:!0,highlight:function(o,s){if(s&&window.hljs.getLanguage(s))try{return window.hljs.highlight(s,o).value}catch{}return""}});var n=t.renderer.rules.link_open||function(o,s,i,a,l){return l.renderToken(o,s,i)};return t.renderer.rules.link_open=function(o,s,i,a,l){return o[s].attrSet("target","_blank"),n(o,s,i,a,l)},t.render(e)}function Ht({notes:e=[],view:t,onViewChange:n}){let o="notes-list-fragment",s="notes-list",i=e.map(a=>r(kn,{note:a,key:a.NoteID}));return t==="grid"&&(o="notes-grid-fragment",s="notes-grid",i=e.map(a=>r(xn,{note:a,key:a.NoteID}))),r("div",{className:o},r($t,{onListViewClick:()=>n("list"),onGridViewClick:()=>n("grid")}),r("div",{className:s},i,r(Nn,{notes:e})))}function kn({note:e}){let t=`/${e.NoteID}`,n=new Date(e.UpdatedAt).toISOString().split("T")[0].replace(/-/g,"/"),o=e.Tags?.map(i=>r("div",{className:"notes-list-item-subtext",key:i.name},i.name)),s=r("div",{className:"notes-list-item-title"},e.Title);return e.Title===""&&(s=r("div",{className:"notes-list-item-title untitled"},"Untitled")),r("div",{className:"notes-list-item"},r(T,{to:t},s,r("div",{className:"notes-list-item-subcontainer"},r("div",{className:"notes-list-item-subtext"},n),r("div",{className:"notes-list-item-tags"},o))))}function xn({note:e}){let t=`/${e.NoteID}`,n=r("div",{className:"notes-grid-item-title"},e.Title);return e.Title===""&&(n=null),r("div",{className:"notes-grid-item"},r(T,{to:t},n,r("div",{className:"notes-grid-item-content",dangerouslySetInnerHTML:{__html:ot(e.Snippet)}})))}function Nn({notes:e}){return e.length>0?null:r("div",{className:"notes-list-empty-text"},"No notes found")}function Wt({tags:e,isEditable:t,onAddTag:n,onRemoveTag:o}){let[s,i]=S(""),[a,l]=S([]),[c,_]=S(null);function f(m){let h=m.target.value;if(i(h),m.key==="ArrowDown"){let v=a.indexOf(c)+1;v<a.length?_(a[v]):_(a[0]);return}if(m.key==="ArrowUp"){let v=a.indexOf(c)-1;v>=0?_(a[v]):_(a[a.length-1]);return}if(m.key==="Enter"&&c){c.tag_id===-1?n({tag_id:-1,name:h}):n(c),d(m);return}if(m.key==="Escape"){d(m);return}if(m.key==="Backspace"&&h===""){let v=e[e.length-1];v&&o(v),d(m);return}if(h===""){l([]);return}M.searchTags(h).then(v=>{let y=e.map(A=>A.tag_id),I=v.filter(A=>!y.includes(A.tag_id));v.length===0&&h.trim()!==""&&I.push({tag_id:-1,name:`Add "${h}"`}),l(I),_(I[0])})}function u(m){n(m),d()}function p(){n({tag_id:-1,name:s}),d()}function d(m){l([]),i(""),_(null)}let k=e?.map(m=>r(bn,{key:m.tag_id,tag:m,onRemoveTag:()=>o(m)}));return r("div",{className:"notes-editor-tags"},k,r(Cn,{query:s,isEditable:t,suggestions:a,selectedTag:c,onKeyUp:f,onSuggestionClick:u,onAddNewTagClick:p}))}function bn({tag:e,onRemoveTag:t}){return r("div",{className:"tag",key:e.tag_id},e.name,r(Sn,{onClick:t}))}function Cn({query:e,isEditable:t,suggestions:n,selectedTag:o,onKeyUp:s,onSuggestionClick:i,onAddNewTagClick:a}){if(!t)return null;let l=n.map(c=>{let f=c.tag_id===o?.tag_id?"dropdown-option is-selected":"dropdown-option",u=c.tag_id===-1?a:i;return r("li",{key:c.tag_id,onClick:()=>u(c),className:f},r("span",null,c.name))});return r(G,null,r("input",{className:"notes-editor-tags-input",placeholder:"Add Tags...",autoComplete:"off",value:e,onKeyUp:s}),r("div",{className:`dropdown-container ${n.length?"open":""}`},r("ul",{className:"dropdown-menu"},l)))}function Sn({onClick:e}){return r("svg",{onClick:e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-circle-minus"},r("circle",{cx:"12",cy:"12",r:"10"}),r("path",{d:"M8 12h8"}))}function Ft({selectedNote:e,isNewNote:t,isFloating:n}){if(!t&&e===null)return null;let[o,s]=S(t),[i,a]=S(e?.Title||""),[l,c]=S(e?.Content||""),[_,f]=S(e?.Tags||[]),[u,p]=S(!1),[d,k]=S([]),m=Pt(null),h=Pt(null),v=null;D(()=>{(t||o&&m.current?.textContent==="")&&m.current.focus();function g(w){(w.metaKey||w.ctrlKey)&&w.key==="Enter"&&(w.preventDefault(),o?y():I()),w.key==="Escape"&&(w.preventDefault(),n&&P())}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[]),D(()=>{if(h.current===null)return;let g=h.current;g.style.height="auto",g.style.height=`${g.scrollHeight+2}px`},[l,o]);function y(){let g={Title:i,Content:l,Tags:_},w=null;t?w=M.createNote(g):w=M.updateNote(e.NoteID,g),w.then(b=>{s(!1),k([]),t&&(window.history.pushState({},"",`/${b.NoteID}`),window.dispatchEvent(new PopStateEvent("navigate")))}).catch(b=>{console.error("Error saving note:",b)})}function I(){s(!0)}function A(g){let w=g.target.textContent;a(w)}function R(g){f(w=>[...w,g])}function B(g){f(w=>w.filter(b=>b.tag_id!==g.tag_id))}function it(g){let w=g.clipboardData.items;if(!Array.from(w).every(b=>b.type.indexOf("image")===-1)){g.preventDefault();for(let b of w)if(b.type.indexOf("image")!==-1){let H=b.getAsFile();k(mt=>[...mt,H]),$(H)}}}function O(g){g.preventDefault(),p(!0)}function J(g){g.preventDefault(),p(!1)}function Q(g){g.preventDefault(),p(!1);let w=g.dataTransfer.files;for(let b of w)b.type.startsWith("image/")&&(k(H=>[...H,b]),$(b))}function P(){window.history.pushState({},"","/"),window.dispatchEvent(new PopStateEvent("navigate"))}function $(g){let w=new FormData;w.append("image",g),M.uploadImage(w).then(b=>{let H=`![](/images/${b.filename})`;De(H)}).catch(b=>{console.error("Error uploading image:",b)})}function De(g){if(h.current===null)return;let w=h.current,b=w.selectionStart,H=w.selectionEnd,mt=w.value.substring(0,b),$e=w.value.substring(H);c(mt+g+$e);let Rt=b+g.length;w.selectionStart=Rt,w.selectionEnd=Rt,w.focus()}o?v=r("textarea",{className:"notes-editor-textarea",placeholder:"Write here...",spellCheck:"false",ref:h,value:l,onInput:g=>c(g.target.value)}):i===""&&l===""?v=r("div",{className:"notes-editor-empty-text"},"Empty note"):v=r("div",{className:"notes-editor-rendered",dangerouslySetInnerHTML:{__html:ot(l)}});let Ue=d.map((g,w)=>{let b=URL.createObjectURL(g);return r("img",{src:b,alt:`Attachment ${w}`})});return r("div",{className:`notes-editor ${o?"is-editable":""}`,tabIndex:"0",onPaste:it},r("div",{className:"notes-editor-header"},r("div",{className:"notes-editor-title",contentEditable:o,ref:m,onBlur:A,dangerouslySetInnerHTML:{__html:i}}),r(Ln,{isEditable:o,isFloating:n,onSaveClick:y,onEditClick:I,onCloseClick:P})),r(Wt,{tags:_,isEditable:o,onAddTag:R,onRemoveTag:B}),r("div",{className:`notes-editor-image-dropzone ${u?"dragover":""}`,onDrop:Q,onDragOver:O,onDragLeave:J},"Drag and drop images here..."),r("div",{className:"notes-editor-image-attachment-preview"},Ue),r("div",{className:"notes-editor-content"},v))}function Ln({isEditable:e,isFloating:t,onSaveClick:n,onEditClick:o,onCloseClick:s}){let i=[];return t&&i.push(r(En,{className:"notes-editor-toolbar-button-close",onClick:()=>window.history.back()})),e?i.push(r(Tn,{className:"notes-editor-toolbar-button-done",onClick:n})):i.push(r(An,{className:"notes-editor-toolbar-button-edit",onClick:o})),r("div",{className:"notes-editor-toolbar"},i)}var En=({className:e,onClick:t})=>r("svg",{onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-x ${e}`},r("path",{d:"M18 6 6 18"}),r("path",{d:"m6 6 12 12"})),Tn=({className:e,onClick:t})=>r("svg",{onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-file-check ${e}`},r("path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}),r("path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}),r("path",{d:"m9 15 2 2 4-4"})),An=({className:e,onClick:t})=>r("svg",{onClick:t,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`lucide lucide-pencil-line ${e}`},r("path",{d:"M12 20h9"}),r("path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z"}),r("path",{d:"m15 5 3 3"}));function Bt(){return r("div",{className:"mobile-navbar-container"},r("div",{className:"mobile-navbar"},r(T,{className:"mobile-navbar-button",to:"/"},r(Pn,null),"Notes"),r(T,{className:"mobile-navbar-button",to:"/"},r(Mn,null),"Search"),r(T,{className:"mobile-navbar-button",to:"/new"},r(In,null),"New")))}function Pn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-files"},r("path",{d:"M20 7h-3a2 2 0 0 1-2-2V2"}),r("path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z"}),r("path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8"}))}function Mn(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-search"},r("circle",{cx:"11",cy:"11",r:"8"}),r("path",{d:"m21 21-4.3-4.3"}))}function In(){return r("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-circle-plus"},r("circle",{cx:"12",cy:"12",r:"10"}),r("path",{d:"M8 12h8"}),r("path",{d:"M12 8v8"}))}function jt(){let[e,t]=S(new URLSearchParams(window.location.search));return D(()=>{function n(){t(new URLSearchParams(window.location.search))}return window.addEventListener("navigate",n),window.addEventListener("popstate",n),()=>{window.removeEventListener("navigate",n),window.removeEventListener("popstate",n)}},[]),e}function ht({noteId:e}){let{appContext:t}=Z(),{focusModes:n,tags:o}=t,[s,i]=S([]),[a,l]=S(null),[c,_]=S("list"),f=jt(),u=f.get("tag_id"),p=f.get("focus_id"),d="notes-list-container",k="notes-editor-container";D(()=>{let h=null;u?h=M.getNotesByTagId(u):h=M.getAllNotes(),h.then(v=>{i(v)}).catch(v=>{console.error("Error loading notes:",v)})},[u,p]),D(()=>{if(e==="new"){l(null);return}if(e===void 0&&s.length>0){l(s[0]);return}if(e!==void 0){let h=parseInt(e,10);M.getNoteById(h).then(v=>{l(v)}).catch(v=>{console.error("Error loading note:",v)})}},[e,s]);function m(h){_(h)}return c==="list"?(d="notes-list-container",k="notes-editor-container"):c==="grid"&&(d="notes-list-container grid",e===void 0?k="notes-editor-container is-hidden":k="notes-editor-container is-floating"),r("div",{className:"page-container"},r("div",{className:"sidebar-container"},r(Ie,{focusModes:n,tags:o})),r("div",{className:d,"data-page":e===void 0?"notes":"editor"},r(Ht,{notes:s,view:c,onViewChange:m})),r("div",{className:k,"data-page":e===void 0?"notes":"editor"},r(Ft,{selectedNote:a,isNewNote:e==="new",key:a?.NoteID,isFloating:e!==void 0&&c==="grid"})),r(Bt,null),r("div",{className:"dialog-container"}))}document.addEventListener("DOMContentLoaded",()=>{fe(r(Pe,null,r(Dn,null)),document.body)});document.addEventListener("keyup",e=>{if(e.ctrlKey&&e.key==="n"){e.preventDefault(),window.history.pushState({},"","/new"),window.dispatchEvent(new PopStateEvent("navigate"));return}});function Dn(){let{updateAppContext:e}=Z();return D(()=>{Promise.all([M.getAllFocusModes(),M.getAllTags()]).then(([t,n])=>{e({focusModes:t,tags:n})}).catch(t=>{console.error("Error loading initial data:",t)})},[]),r(Ut,null,r(vt,{path:"/",component:ht}),r(vt,{path:"/:noteId",component:ht}))}
